@using System.Globalization
@using CliqFlip.Web.Mvc.ViewModels.User
@model CliqFlip.Web.Mvc.ViewModels.User.UserInterestsViewModel
@{
	Layout = "~/Views/User/_Profile.cshtml";
}
@section styles
{
}
@Html.ValidationSummary()
<div id="interests-container">
	@foreach (UserInterestsViewModel.InterestViewModel interest in Model.Interests)
	{
		<div class="user-interest">
			<div class="user-interest-title">
				<strong>@interest.Name</strong> <a class="user-interest-title-add-photo" value="@interest.UserInterestId" href="javascript:void(0);" title="add photo">
													<span>add photo</span></a>
			</div>
			<ul class="intereset-slider">
				@foreach (UserInterestsViewModel.InterestImageViewModel image in interest.Images)
				{
					<li>
						<div class="interest-slider-panel-container">
							<a rel="interest-@interest.UserInterestId" value="@image.ImageId" title="@image.Description" href="@image.FullImage">
								<img src="@image.MediumImage" alt="@image.Description"/>
							</a>
						</div>
					</li>
				}
			</ul>
		</div>
	}
</div>
<div class="user-interest-add-photo-dialog" id="add-photo">
	<div class="uploadInterestImage">
		@using (Html.BeginForm("SaveInterestImage", "User", FormMethod.Post, new {@encType = "multipart/form-data"}))
		{
			<h2>
				Description:</h2>
			@Html.TextArea("imageDescription", new {@class = "image-upload-description"})
			//for some reason, the form would abruptly end when using fileuplaod BEFORe description
			<h2>
				Add a photo</h2>
			@Html.Hidden("userInterestId", null, new {@id = "userInterestId"})
			@FileUpload.GetHtml("profileImage", initialNumberOfFiles: 1, allowMoreFilesToBeAdded: false, uploadText: "Upload Photo")
		}
	</div>
</div>
@section scripts
{
	<script type="text/javascript" src="@Url.Content("/Content/js/user/interests.js")"> </script>
	<script type="text/javascript">
		$(function() {
			InitInterests(@(Model.CanEdit.ToString(CultureInfo.InvariantCulture).ToLower()));
			InitSaveImages();
			InitShowImages(@Html.Raw(Model.MakeDefaultUrl));
		});
	</script>
}