/*	
*	jQuery dotdotdot 1.2.1
*	
*	Copyright (c) 2011 Fred Heusschen
*	www.frebsite.nl
*
*	Plugin website:
*	dotdotdot.frebsite.nl
*
*	Dual licensed under the MIT and GPL licenses.
*	http://en.wikipedia.org/wiki/MIT_License
*	http://en.wikipedia.org/wiki/GNU_General_Public_License
*/
(function(f){if(f.fn.dotdotdot){return}f.fn.dotdotdot=function(p){if(this.length==0){b(true,'No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){f(this).dotdotdot(p)})}var u=this,s=this[0];u.bind_events=function(){u.bind("update.dot"+n,function(y,w){y.stopPropagation();var o=k(u);m.maxHeight=(typeof m.height=="number")?m.height:o;q.empty();q.append(t.clone(true));var A=false,x=false;if(m.afterElement){A=m.afterElement.clone(true);m.afterElement.remove()}if(i(q,m)){if(m.wrap=="children"){x=d(q,m,A)}else{x=j(q,q,m,A)}}m.isTruncated=x;return x});u.bind("isTruncated.dot"+n,function(x,w){var o=m.isTruncated;if(typeof w=="function"){w.call(s,o)}return o});u.bind("destroy.dot"+n,function(o){o.stopPropagation();u.unwatch();u.unbind_events();u.empty();u.append(t);u.data("dotdotdot",false)})};u.unbind_events=function(){u.unbind(".dot"+n)};u.watch=function(){u.unwatch();if(m.watch=="window"){f(window).bind("resize.dot"+n,function(){if(v){clearInterval(v)}v=setTimeout(function(){u.trigger("update")},10)})}else{r=h(u);v=setInterval(function(){var o=h(u);if(r.width!=o.width||r.height!=o.height){u.trigger("update");r=h(u)}},100)}};u.unwatch=function(){if(v){clearInterval(v)}};if(u.data("dotdotdot")){u.trigger("destroy")}var m=f.extend(true,{},f.fn.dotdotdot.defaults,p),n=f.fn.dotdotdot.serial++,t=u.contents(),r={},v=null,q=u.wrapInner("<"+m.wrapper+' class="dotdotdot" />').children();m.afterElement=c(m.after,q);m.isTruncated=false;q.css({height:"auto",width:"auto"});u.data("dotdotdot",true);u.bind_events();u.trigger("update");if(m.watch){u.watch()}return u};f.fn.dotdotdot.serial=0;f.fn.dotdotdot.defaults={wrapper:"div",ellipsis:"... ",wrap:"word",after:null,height:null,watch:false,debug:false};function d(p,u,t){var s=p.children(),r=false;p.empty();for(var n=0,m=s.length;n<m;n++){var q=s.eq(n);p.append(q);if(t){p.append(t)}if(i(p,u)){q.remove();r=true;break}else{if(t){t.remove()}}}return r}function j(p,w,q,n){var u=p.contents(),t=false;p.empty();for(var v=0,r=u.length;v<r;v++){if(t){break}var s=u[v],m=f(s);if(typeof s=="undefined"){continue}p.append(m);if(n){p.append(n)}if(s.nodeType==3){if(i(w,q)){t=e(m,w,q)}}else{t=j(m,w,q,n)}if(!t){if(n){n.remove()}}}return t}function e(m,v,n){var r=false,q=m[0];if(typeof q=="undefined"){return false}var s=(n.wrap=="letter")?"":" ",t=g(q).split(s);a(q,t.join(s)+n.ellipsis);for(var u=t.length-1;u>=0;u--){if(i(v,n)){a(q,g(q).substring(0,g(q).length-(t[u].length+s.length+n.ellipsis.length))+n.ellipsis)}else{r=true;break}}if(!r){var p=m.parent();m.remove();r=e(p.contents().last(),v,n)}return r}function i(n,m){return n.innerHeight()>m.maxHeight}function h(m){return{width:m.innerWidth(),height:m.innerHeight()}}function a(n,m){if(n.innerText){n.innerText=m}else{if(n.nodeValue){n.nodeValue=m}else{if(n.textContent){n.textContent=m}}}}function g(m){if(m.innerText){return m.innerText}else{if(m.nodeValue){return m.nodeValue}else{if(m.textContent){return m.textContent}else{return""}}}}function c(m,n){if(typeof m=="undefined"){return false}if(!m){return false}if(typeof m=="string"){m=f(m,n);return(m.length)?m:false}if(typeof m=="object"){return(typeof m.jquery=="undefined")?false:m}return false}function k(p){var q=p.innerHeight(),o=["paddingTop","paddingBottom"];for(z=0,l=o.length;z<l;z++){var n=parseInt(p.css(o[z]));if(isNaN(n)){n=0}q-=n}return q}function b(o,n){if(!o){return false}if(typeof n=="string"){n="dotdotdot: "+n}else{n=["dotdotdot:",n]}if(window.console&&window.console.log){window.console.log(n)}return false}})(jQuery);