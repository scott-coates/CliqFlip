/**
 * jScroller Plugin 0.1.4
 *
 * Copyright (c) 2012  Renato Saito (renato.saito at live.com)
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function () {
    jQuery.fn.jScroller = function (i, j) {
        function f(e) {
            0 === b.find("#jscroll-loading").length && (b.find(".jscroll-loadmore").parent("div").remove(), b.append('<button id="jscroll-loading" disabled="disabled">' + a.loadingButtonText + "</button>")); jQuery.ajax({
                url: i, type: a.ajaxType, data: { start: d, limit: a.limit }, timeout: a.timeout, success: function (c) {
                    b.find("#jscroll-loading").remove(); if (c.Success === false) a.onErrorCallback(b, c.Message); else {
                        g = c.total; d = d + a.limit; for (var h = 0; h < c.data.length; h++) a.onSuccessCallback(c.data[h],
b); d >= g || c.data.length === 0 ? b.append('<div id="jscroll-fulllist">' + a.fullListText + "</div>") : e === false && b.append('<div><button class="jscroll-loadmore">' + a.loadMoreButtonText + "</button></div>")
                    }
                }, error: function (c, d, e) { if (e == "timeout") a.onTimeoutCallback(); else a.onErrorCallback(b, e) }
            })
        } function k() { b.on("click", ".jscroll-loadmore", function () { f(!1); jQuery(this).parent("div").remove() }) } var a = jQuery.extend({
            limit: 10, onSuccessCallback: function () { }, onErrorCallback: function () { alert("An error occurred while trying to retrive data from store") },
            onTimeoutCallback: function () { }, timeout: 3E3, loadingButtonText: "Loading...", loadMoreButtonText: "Load more", fullListText: "There is no more items to show", ajaxType: "POST"
        }, j), b = jQuery(this), d = 0, g = 0; jQuery(window).scroll(function () { var a = jQuery(this); a.scrollTop() === jQuery(document).height() - a.height() && !(d >= g) && f(!0); return !1 }); jQuery(document).ready(function () { k(); f(!1) })
    }
})(jQuery);